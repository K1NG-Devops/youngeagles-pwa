import{r as e}from"./vendor-react-BHu_3aIX.js";import{u as t,l as s,j as a,r,C as l,_ as i,ba as d,d as n,aa as x,a7 as c,c as o,aj as g,ac as m,a0 as h,f as b,b as u,q as j,A as y,n as p}from"./index-BetBoxhn.js";import{e as N,u as v}from"./vendor-router-BfAStt8k.js";import"./vendor-utils-C_UPlz3V.js";const f=()=>{const{id:f}=N(),{user:w}=t(),{isDark:k}=s(),S=v(),[$,C]=e.useState(null),[D,A]=e.useState([]),[_,P]=e.useState(!0),[G,R]=e.useState(null),[E,M]=e.useState({totalAssigned:0,submitted:0,graded:0,pending:0,averageScore:0,completionRate:0});e.useEffect(()=>{var e,t,s;e=void 0,t=null,s=function*(){var e,t;if(!f)return R("No homework ID provided"),void P(!1);try{P(!0),R(null);const e=(yield y.get(`/api/homework/${f}`)).data.homework;if(e.teacher_id!==w.id)return R("You can only view your own homework assignments"),void P(!1);C(e);const t=(yield y.get(`/api/homework/${f}/submissions`)).data.submissions||[];A(t);const s=t.length,a=t.filter(e=>"submitted"===e.status||"graded"===e.status).length,r=t.filter(e=>"graded"===e.status).length,l=t.filter(e=>"pending"===e.status).length,i=t.filter(e=>"graded"===e.status&&null!==e.score),d=i.length>0?Math.round(i.reduce((e,t)=>e+t.score,0)/i.length):0,n=s>0?Math.round(a/s*100):0;M({totalAssigned:s,submitted:a,graded:r,pending:l,averageScore:d,completionRate:n})}catch(s){R((null==(t=null==(e=s.response)?void 0:e.data)?void 0:t.message)||"Failed to load homework details"),p.error("Failed to load homework details")}finally{P(!1)}},new Promise((a,r)=>{var l=e=>{try{d(s.next(e))}catch(t){r(t)}},i=e=>{try{d(s.throw(e))}catch(t){r(t)}},d=e=>e.done?a(e.value):Promise.resolve(e.value).then(l,i);d((s=s.apply(e,t)).next())})},[f,w.id]);const F=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return _?a.jsx("div",{className:`min-h-screen ${k?"bg-gray-900":"bg-gray-50"} flex items-center justify-center`,children:a.jsxs("div",{className:"text-center",children:[a.jsx(r,{className:"animate-spin text-4xl text-blue-500 mx-auto mb-4"}),a.jsx("p",{className:""+(k?"text-gray-300":"text-gray-600"),children:"Loading homework details..."})]})}):G?a.jsx("div",{className:`min-h-screen ${k?"bg-gray-900":"bg-gray-50"} flex items-center justify-center`,children:a.jsxs("div",{className:"text-center",children:[a.jsx(l,{className:"text-4xl text-red-500 mx-auto mb-4"}),a.jsx("h2",{className:`text-xl font-semibold ${k?"text-white":"text-gray-900"} mb-2`,children:"Error"}),a.jsx("p",{className:(k?"text-gray-300":"text-gray-600")+" mb-4",children:G}),a.jsxs("button",{onClick:()=>S("/teacher/dashboard"),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(i,{className:"text-sm"}),"Back to Dashboard"]})]})}):a.jsx("div",{className:`min-h-screen ${k?"bg-gray-900":"bg-gray-50"} p-4`,children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:()=>S("/homework"),className:"p-2 rounded-lg transition-colors "+(k?"hover:bg-gray-800 text-gray-400":"hover:bg-gray-100 text-gray-600"),children:a.jsx(i,{className:"text-xl"})}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold "+(k?"text-white":"text-gray-900"),children:["ðŸ“š ",null==$?void 0:$.title]}),a.jsx("p",{className:""+(k?"text-gray-400":"text-gray-600"),children:"Homework Assignment Management"})]})]}),a.jsx("div",{className:"flex gap-2",children:a.jsxs("button",{onClick:()=>S(`/homework/${f}/edit`),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(d,{className:"text-sm"}),"Edit Assignment"]})})]}),a.jsx("div",{className:"p-6 rounded-xl border mb-6 "+(k?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:a.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:`text-lg font-semibold ${k?"text-white":"text-gray-900"} mb-4`,children:"Assignment Details"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(n,{className:"text-blue-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm "+(k?"text-gray-400":"text-gray-600"),children:"Subject"}),a.jsx("p",{className:"font-medium "+(k?"text-white":"text-gray-900"),children:(null==$?void 0:$.subject)||"General"})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(x,{className:"text-green-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm "+(k?"text-gray-400":"text-gray-600"),children:"Due Date"}),a.jsx("p",{className:"font-medium "+(k?"text-white":"text-gray-900"),children:(null==$?void 0:$.due_date)?F($.due_date):"No due date"})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(c,{className:"text-purple-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm "+(k?"text-gray-400":"text-gray-600"),children:"Duration"}),a.jsxs("p",{className:"font-medium "+(k?"text-white":"text-gray-900"),children:[(null==$?void 0:$.duration)||30," minutes"]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(o,{className:"text-yellow-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm "+(k?"text-gray-400":"text-gray-600"),children:"Points"}),a.jsxs("p",{className:"font-medium "+(k?"text-white":"text-gray-900"),children:[(null==$?void 0:$.points)||10," points"]})]})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:`text-lg font-semibold ${k?"text-white":"text-gray-900"} mb-4`,children:"Description"}),a.jsx("p",{className:""+(k?"text-gray-300":"text-gray-700"),children:(null==$?void 0:$.description)||"No description provided."})]})]})}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-6",children:[a.jsx("div",{className:"p-4 rounded-xl border "+(k?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold "+(k?"text-white":"text-gray-900"),children:E.totalAssigned}),a.jsx("p",{className:"text-sm "+(k?"text-gray-400":"text-gray-600"),children:"Total Assigned"})]}),a.jsx(g,{className:"text-blue-500 text-xl"})]})}),a.jsx("div",{className:"p-4 rounded-xl border "+(k?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-orange-500",children:E.pending}),a.jsx("p",{className:"text-sm "+(k?"text-gray-400":"text-gray-600"),children:"Pending"})]}),a.jsx(c,{className:"text-orange-500 text-xl"})]})}),a.jsx("div",{className:"p-4 rounded-xl border "+(k?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-blue-500",children:E.submitted}),a.jsx("p",{className:"text-sm "+(k?"text-gray-400":"text-gray-600"),children:"Submitted"})]}),a.jsx(m,{className:"text-blue-500 text-xl"})]})}),a.jsx("div",{className:"p-4 rounded-xl border "+(k?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-green-500",children:E.graded}),a.jsx("p",{className:"text-sm "+(k?"text-gray-400":"text-gray-600"),children:"Graded"})]}),a.jsx(h,{className:"text-green-500 text-xl"})]})}),a.jsx("div",{className:"p-4 rounded-xl border "+(k?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"text-2xl font-bold text-purple-500",children:[E.completionRate,"%"]}),a.jsx("p",{className:"text-sm "+(k?"text-gray-400":"text-gray-600"),children:"Completion Rate"})]}),a.jsx(b,{className:"text-purple-500 text-xl"})]})}),a.jsx("div",{className:"p-4 rounded-xl border "+(k?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"text-2xl font-bold text-indigo-500",children:[E.averageScore,"%"]}),a.jsx("p",{className:"text-sm "+(k?"text-gray-400":"text-gray-600"),children:"Average Score"})]}),a.jsx(o,{className:"text-indigo-500 text-xl"})]})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h2",{className:`text-xl font-semibold ${k?"text-white":"text-gray-900"} mb-4`,children:["ðŸ“‹ Student Submissions (",D.length,")"]}),0===D.length?a.jsxs("div",{className:"text-center py-12 rounded-xl border "+(k?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:[a.jsx(u,{className:"text-6xl mx-auto mb-4 "+(k?"text-gray-600":"text-gray-400")}),a.jsx("h3",{className:`text-xl font-semibold ${k?"text-gray-300":"text-gray-600"} mb-2`,children:"No submissions yet"}),a.jsx("p",{className:"text-gray-500",children:"Student submissions will appear here once they start working on this assignment."})]}):a.jsx("div",{className:"grid gap-4",children:D.map(e=>{const t=(e=>{const t={pending:{color:"orange",icon:c,text:"Pending",bgClass:"bg-orange-100 dark:bg-orange-900",textClass:"text-orange-800 dark:text-orange-200"},submitted:{color:"blue",icon:m,text:"Submitted",bgClass:"bg-blue-100 dark:bg-blue-900",textClass:"text-blue-800 dark:text-blue-200"},graded:{color:"green",icon:h,text:"Graded",bgClass:"bg-green-100 dark:bg-green-900",textClass:"text-green-800 dark:text-green-200"}};return t[e]||t.pending})(e.status),s=t.icon;return a.jsx("div",{className:"p-6 rounded-xl border transition-all hover:shadow-lg "+(k?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:`p-3 rounded-lg ${t.bgClass}`,children:a.jsx(s,{className:`text-lg ${t.textClass}`})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-lg "+(k?"text-white":"text-gray-900"),children:e.student_name||`Student ${e.student_id}`}),a.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[a.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full font-medium ${t.bgClass} ${t.textClass}`,children:[a.jsx(s,{className:"text-xs"}),t.text]}),e.submitted_at&&a.jsxs("span",{className:""+(k?"text-gray-400":"text-gray-600"),children:["Submitted: ",F(e.submitted_at)]}),"graded"===e.status&&null!==e.score&&a.jsxs("span",{className:"text-green-600 font-medium",children:["Score: ",e.score,"%"]})]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>(e=>{S(`/teacher/submission/${e.id}`)})(e),className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg transition-colors "+(k?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[a.jsx(j,{className:"text-xs"}),"View"]}),"submitted"===e.status&&a.jsxs("button",{onClick:()=>{return t=e.id,void S(`/teacher/grade/${t}`);var t},className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(h,{className:"text-xs"}),"Grade"]})]})]})},e.id)})})]})]})})};export{f as default};
