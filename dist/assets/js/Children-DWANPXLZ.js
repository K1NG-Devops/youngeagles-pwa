import{r as e}from"./vendor-react-BHu_3aIX.js";import{N as t,l as r,j as s,n as a,z as l,ai as n,a as i,u as o,G as d,K as c,_ as x,aa as g,t as m,w as h,I as u,A as b}from"./index-BetBoxhn.js";import{u as y}from"./vendor-router-BfAStt8k.js";import"./vendor-utils-C_UPlz3V.js";const p=({feature:e,children:a,fallback:o,showUpgrade:d=!0,blockAccess:c=!0,requiredPlan:x="premium"})=>{const{isDark:g}=r(),{hasFeature:m,getCurrentPlan:h,plans:u}=t(),b=y(),p=h(),j=m(e),f=u[x];if(j)return a;if(o&&!c)return o;const v=()=>{b(`/checkout?plan=${x}`)},N=()=>s.jsxs("div",{className:"p-6 rounded-lg border-2 border-dashed text-center "+(g?"border-gray-600 bg-gray-800/50":"border-gray-300 bg-gray-50"),children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center "+(g?"bg-gray-700":"bg-gray-200"),children:s.jsx(l,{className:"text-2xl "+(g?"text-gray-400":"text-gray-500")})}),s.jsx("h3",{className:"text-lg font-semibold mb-2 "+(g?"text-white":"text-gray-900"),children:"Upgrade Required"}),s.jsxs("p",{className:"text-sm mb-4 "+(g?"text-gray-400":"text-gray-600"),children:["This feature requires the ",null==f?void 0:f.name," plan or higher. You're currently on the ",null==p?void 0:p.name," plan."]}),d&&s.jsxs("button",{onClick:v,className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 transition-colors font-medium",children:[s.jsx(n,{className:"w-4 h-4 mr-2"}),"Upgrade to ",null==f?void 0:f.name,s.jsx(i,{className:"w-4 h-4 ml-2"})]})]});return c?s.jsx(N,{}):null},j=()=>{const{user:n}=o(),{isDark:i}=r(),{getCurrentPlan:j,canAddChild:f}=t(),{checkChildLimit:v}=(()=>{const{hasFeature:e,getFeatureLimit:r,canAddChild:s,canUploadFile:l}=t();return{checkFeatureAccess:(t,r=!0)=>{const s=e(t);return!s&&r&&a.warning("This feature requires a plan upgrade"),s},checkFileUpload:(e,t=!0)=>{const s=l(e);if(!s&&t){const e=r("maxFileSize");a.error(`File size exceeds your plan limit of ${e}MB`)}return s},checkChildLimit:(e=!0)=>{const t=s();if(!t&&e){const e=r("maxChildren");a.error(`You've reached your plan limit of ${e} children`)}return t},hasFeature:e,getFeatureLimit:r}})(),[N,w]=e.useState([]),[k,C]=e.useState(!0),A=y(),_=j(),F=null==_?void 0:_.features.maxChildren;return e.useEffect(()=>{n&&(()=>{return e=void 0,t=null,r=function*(){try{let e;C(!0),e="parent"===(null==n?void 0:n.userType)?yield b.children.getByParent(n.id):yield b.children.getAll(),w(e.data.children||[])}catch(e){a.error("Failed to load children data")}finally{C(!1)}},new Promise((s,a)=>{var l=e=>{try{i(r.next(e))}catch(t){a(t)}},n=e=>{try{i(r.throw(e))}catch(t){a(t)}},i=e=>e.done?s(e.value):Promise.resolve(e.value).then(l,n);i((r=r.apply(e,t)).next())});var e,t,r})()},[n]),k?s.jsx("div",{className:"flex items-center justify-center min-h-screen "+(i?"bg-gray-900":"bg-gray-50"),children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),s.jsx("p",{className:""+(i?"text-gray-300":"text-gray-600"),children:"Loading children..."})]})}):0===N.length?s.jsx("div",{className:`min-h-screen ${i?"bg-gray-900":"bg-gray-50"} py-6`,children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 text-center p-8 rounded-lg shadow-sm border "+(i?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:[s.jsx(d,{className:"text-6xl mx-auto mb-4 text-gray-400"}),s.jsx("h2",{className:"text-2xl font-bold mb-2 "+(i?"text-white":"text-gray-900"),children:"No Children Found"}),s.jsx("p",{className:"text-lg "+(i?"text-gray-300":"text-gray-600"),children:"parent"===(null==n?void 0:n.userType)?"You don't have any children registered yet.":"No children are currently registered in the system."}),"parent"!==(null==n?void 0:n.userType)&&s.jsx(p,{feature:"maxChildren",showUpgrade:!0,blockAccess:!1,children:s.jsxs("button",{onClick:()=>{v()&&a.info("Add child feature coming soon!")},className:"mt-4 px-6 py-3 rounded-lg font-medium transition-colors "+(i?"bg-blue-600 hover:bg-blue-700 text-white":"bg-blue-500 hover:bg-blue-600 text-white"),children:[s.jsx(c,{className:"inline mr-2"}),"Add First Child"]})})]})}):s.jsx("div",{className:`min-h-screen ${i?"bg-gray-900":"bg-gray-50"} pt-4 pb-8`,children:s.jsxs("div",{className:"max-w-6xl mx-auto px-2 sm:px-6 space-y-6",children:[s.jsx("div",{className:"p-2 mt-4 rounded-lg shadow-sm border "+(i?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("button",{onClick:()=>A("/dashboard"),className:"inline-flex px-2 items-center py-2 rounded-lg transition-colors "+(i?"text-gray-300 hover:bg-gray-700 hover:text-white":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"),children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl mr-8 font-bold "+(i?"text-white":"text-gray-900"),children:"parent"===(null==n?void 0:n.userType)?"My Children":"All Children"}),s.jsxs("p",{className:`text-sm ${i?"text-gray-400":"text-gray-600"} mt-1`,children:["Total: ",N.length," ",1===N.length?"child":"children"]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"px-4 py-2 rounded-lg "+(i?"bg-blue-900 text-blue-300":"bg-blue-100 text-blue-800"),children:[s.jsx(d,{className:"inline mr-2"}),N.length,-1!==F&&s.jsxs("span",{className:"text-xs ml-1",children:["/ ",F]})]}),"parent"!==(null==n?void 0:n.userType)&&s.jsx("button",{onClick:()=>{v()&&a.info("Add child feature coming soon!")},disabled:!f(),className:"px-4 py-2 rounded-lg font-medium transition-colors flex items-center "+(f()?i?"bg-green-600 hover:bg-green-700 text-white":"bg-green-500 hover:bg-green-600 text-white":"bg-gray-400 text-gray-600 cursor-not-allowed"),children:f()?s.jsxs(s.Fragment,{children:[s.jsx(c,{className:"w-4 h-4 mr-2"}),"Add Child"]}):s.jsxs(s.Fragment,{children:[s.jsx(l,{className:"w-4 h-4 mr-2"}),"Limit Reached"]})})]})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N.map(e=>{var t;return s.jsxs("div",{className:"p-6 rounded-lg shadow-sm border transition-all hover:shadow-md "+(i?"bg-gray-800 border-gray-700 hover:bg-gray-750":"bg-white border-gray-200 hover:bg-gray-50"),children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-lg font-bold "+(i?"bg-blue-600 text-white":"bg-blue-500 text-white"),children:e.first_name?e.first_name.charAt(0):(null==(t=e.name)?void 0:t.charAt(0))||"?"}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-lg font-semibold "+(i?"text-white":"text-gray-900"),children:e.first_name&&e.last_name?`${e.first_name} ${e.last_name}`:e.name}),e.class_name&&s.jsx("p",{className:`text-sm ${i?"text-blue-400":"text-blue-600"} font-medium`,children:e.class_name})]})]}),s.jsxs("div",{className:"space-y-3",children:[e.age&&s.jsxs("div",{className:"flex items-center",children:[s.jsx(g,{className:"w-4 h-4 mr-3 "+(i?"text-gray-400":"text-gray-500")}),s.jsxs("span",{className:"text-sm "+(i?"text-gray-300":"text-gray-600"),children:[s.jsx("strong",{children:"Age:"})," ",e.age," years old"]})]}),e.date_of_birth&&s.jsxs("div",{className:"flex items-center",children:[s.jsx(g,{className:"w-4 h-4 mr-3 "+(i?"text-gray-400":"text-gray-500")}),s.jsxs("span",{className:"text-sm "+(i?"text-gray-300":"text-gray-600"),children:[s.jsx("strong",{children:"DOB:"})," ",new Date(e.date_of_birth).toLocaleDateString()]})]}),e.parent_name&&s.jsxs("div",{className:"flex items-center",children:[s.jsx(m,{className:"w-4 h-4 mr-3 "+(i?"text-gray-400":"text-gray-500")}),s.jsxs("span",{className:"text-sm "+(i?"text-gray-300":"text-gray-600"),children:[s.jsx("strong",{children:"Parent:"})," ",e.parent_name]})]}),e.emergency_contact&&s.jsxs("div",{className:"flex items-center",children:[s.jsx(h,{className:"w-4 h-4 mr-3 "+(i?"text-gray-400":"text-gray-500")}),s.jsxs("span",{className:"text-sm "+(i?"text-gray-300":"text-gray-600"),children:[s.jsx("strong",{children:"Emergency:"})," ",e.emergency_contact]})]}),!e.class_name&&s.jsx("div",{className:"text-xs px-2 py-1 rounded-full inline-block "+(i?"bg-yellow-900 text-yellow-300":"bg-yellow-100 text-yellow-800"),children:"Not assigned to class"})]}),s.jsxs("div",{className:"mt-6 flex space-x-3",children:[s.jsx("button",{className:"flex-1 px-4 py-2 rounded-lg font-medium transition-colors "+(i?"bg-blue-600 hover:bg-blue-700 text-white":"bg-blue-500 hover:bg-blue-600 text-white"),onClick:()=>a.info("View details feature coming soon!"),children:"View Details"}),"parent"!==(null==n?void 0:n.userType)&&s.jsx("button",{className:"px-4 py-2 rounded-lg font-medium transition-colors "+(i?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-200 hover:bg-gray-300 text-gray-700"),onClick:()=>a.info("Edit feature coming soon!"),children:"Edit"})]})]},e.id)})}),"parent"!==(null==n?void 0:n.userType)&&s.jsxs("div",{className:"p-6 rounded-lg shadow-sm border "+(i?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 "+(i?"text-white":"text-gray-900"),children:"Quick Actions"}),s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsx("button",{onClick:()=>a.info("Add child feature coming soon!"),className:"px-4 py-2 rounded-lg font-medium transition-colors "+(i?"bg-green-600 hover:bg-green-700 text-white":"bg-green-500 hover:bg-green-600 text-white"),children:"+ Add Child"}),s.jsx("button",{onClick:()=>a.info("Bulk import feature coming soon!"),className:"px-4 py-2 rounded-lg font-medium transition-colors "+(i?"bg-purple-600 hover:bg-purple-700 text-white":"bg-purple-500 hover:bg-purple-600 text-white"),children:"Import Children"}),s.jsx("button",{onClick:()=>a.info("Export feature coming soon!"),className:"px-4 py-2 rounded-lg font-medium transition-colors "+(i?"bg-yellow-600 hover:bg-yellow-700 text-white":"bg-yellow-500 hover:bg-yellow-600 text-white"),children:"Export List"})]})]}),s.jsx(u,{})]})})};export{j as default};
