var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,l=(t,r,s)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s,i=(e,t)=>{for(var r in t||(t={}))a.call(t,r)&&l(e,r,t[r]);if(s)for(var r of s(t))n.call(t,r)&&l(e,r,t[r]);return e},o=(e,s)=>t(e,r(s)),d=(e,t,r)=>new Promise((s,a)=>{var n=e=>{try{i(r.next(e))}catch(t){a(t)}},l=e=>{try{i(r.throw(e))}catch(t){a(t)}},i=e=>e.done?s(e.value):Promise.resolve(e.value).then(n,l);i((r=r.apply(e,t)).next())});import{r as c}from"./vendor-react-BHu_3aIX.js";import{l as x,g as m,ak as g,v as u,al as h,A as b,j as y,a7 as p,L as f,t as j}from"./index-BetBoxhn.js";import"./vendor-router-BfAStt8k.js";import"./vendor-utils-C_UPlz3V.js";const w=()=>{const{isDark:e}=x(),[t,r]=c.useState([]),[s,a]=c.useState(!0),[n,l]=c.useState(null);c.useEffect(()=>{const e=new window.AbortController;return d(void 0,null,function*(){try{a(!0),l(null);const t=yield b.notifications.getAll({signal:e.signal});r(t.data.notifications||[])}catch(t){if("AbortError"!==t.name){const e=[{id:1,title:"Welcome to Young Eagles!",message:"Thank you for joining Young Eagles. We're excited to have you on board and look forward to supporting your child's learning journey.",type:"announcement",priority:"low",read:!1,sender:"Young Eagles Admin",timestamp:(new Date).toISOString()},{id:2,title:"New Homework Assignment",message:"A new mathematics homework assignment has been posted. Please check the homework section for details and submission instructions.",type:"homework",priority:"high",read:!1,sender:"Mathematics Teacher",timestamp:new Date(Date.now()-36e5).toISOString()},{id:3,title:"Payment Reminder",message:"This is a friendly reminder that your monthly school fees are due in 3 days. Please submit your payment proof through the app.",type:"announcement",priority:"medium",read:!0,sender:"Finance Department",timestamp:new Date(Date.now()-864e5).toISOString()},{id:4,title:"Parent-Teacher Conference",message:"Parent-teacher conferences are scheduled for next week. Please check your calendar and confirm your appointment slot.",type:"message",priority:"medium",read:!1,sender:"Class Teacher",timestamp:new Date(Date.now()-1728e5).toISOString()}];r(e),l(null)}}finally{a(!1)}}),()=>{e.abort()}},[]);const w=c.useCallback(e=>{switch(e){case"homework":return h;case"message":return u;case"announcement":return g;default:return m}},[]),N=c.useCallback(t=>{const r={high:e?"text-red-400 bg-red-900/20 border-red-800":"text-red-600 bg-red-50 border-red-200",medium:e?"text-yellow-400 bg-yellow-900/20 border-yellow-800":"text-yellow-600 bg-yellow-50 border-yellow-200",low:e?"text-green-400 bg-green-900/20 border-green-800":"text-green-600 bg-green-50 border-green-200",default:e?"text-blue-400 bg-blue-900/20 border-blue-800":"text-blue-600 bg-blue-50 border-blue-200"};return r[t]||r.default},[e]),v=c.useCallback(e=>{const t=new Date(e),r=new Date,s=Math.floor((r-t)/36e5);if(s<1)return"Just now";if(s<24)return`${s}h ago`;return`${Math.floor(s/24)}d ago`},[]),k=c.useCallback(e=>d(void 0,null,function*(){try{r(t=>t.map(t=>t.id===e?o(i({},t),{read:!0}):t)),yield b.notifications.markAsRead(e)}catch(t){r(t=>t.map(t=>t.id===e?o(i({},t),{read:!1}):t))}}),[]),D=c.useCallback((e,t)=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),k(t))},[k]),O=c.useCallback(()=>{window.location.reload()},[]);if(s)return y.jsx("div",{className:"flex items-center justify-center min-h-screen "+(e?"bg-gray-900":"bg-gray-50"),children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),y.jsx("p",{className:""+(e?"text-gray-300":"text-gray-600"),children:"Loading notifications..."})]})});if(n)return y.jsx("div",{className:"flex items-center justify-center min-h-screen "+(e?"bg-gray-900":"bg-gray-50"),children:y.jsxs("div",{className:"text-center",children:[y.jsx(g,{className:"text-4xl mx-auto mb-4 "+(e?"text-red-400":"text-red-500")}),y.jsx("p",{className:"mb-4 "+(e?"text-gray-300":"text-gray-600"),children:n}),y.jsx("button",{onClick:O,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors",children:"Try Again"})]})});const S=t.filter(e=>!e.read).length;return y.jsx("div",{className:`min-h-screen mt-24 ${e?"bg-gray-900":"bg-gray-50"} pb-32`,children:y.jsxs("div",{className:"p-4 space-y-4 mt-4",children:[y.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white p-6 rounded-2xl",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-2xl font-bold mb-1",children:"ðŸ”” Notifications"}),y.jsx("p",{className:"text-purple-100 text-sm",children:"Stay updated with the latest messages and alerts"})]}),S>0&&y.jsx("div",{className:"bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full","aria-label":`${S} unread notifications`,children:S})]})}),0===t.length?y.jsxs("div",{className:"p-6 text-center rounded-xl shadow-sm border "+(e?"bg-gray-800 border-gray-700":"bg-white border-gray-100"),children:[y.jsx(m,{className:"text-4xl mx-auto mb-4 "+(e?"text-gray-400":"text-gray-300")}),y.jsx("h3",{className:"text-lg font-semibold mb-2 "+(e?"text-white":"text-gray-900"),children:"No New Notifications"}),y.jsx("p",{className:""+(e?"text-gray-400":"text-gray-600"),children:"Check back later for new messages and alerts."})]}):y.jsx("div",{className:"space-y-4",children:t.map((t,r)=>{var s;const a=w(t.type);return y.jsx("div",{children:y.jsxs("div",{className:`p-4 rounded-xl shadow-sm border transition-all hover:shadow-md cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-500 ${e?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} ${t.read?"":e?"border-l-4 border-l-blue-400":"border-l-4 border-l-blue-500"}`,onClick:()=>k(t.id),onKeyDown:e=>D(e,t.id),tabIndex:0,role:"button","aria-label":`Mark notification "${t.title}" as read`,children:[y.jsxs("div",{className:"flex items-start justify-between mb-3",children:[y.jsxs("div",{className:"flex items-center space-x-3",children:[y.jsx("div",{className:`p-2 rounded-lg ${N(t.priority)}`,children:y.jsx(a,{className:"text-lg"})}),y.jsxs("div",{className:"flex-1",children:[y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx("h3",{className:"text-lg font-semibold "+(e?"text-white":"text-gray-900"),children:t.title}),!t.read&&y.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full","aria-label":"Unread notification"})]}),y.jsx("div",{className:"flex items-center space-x-2 mt-1",children:y.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${N(t.priority)}`,children:(null==(s=t.priority)?void 0:s.toUpperCase())||"NORMAL"})})]})]}),y.jsxs("div",{className:"text-right",children:[y.jsxs("div",{className:"flex items-center space-x-1 mb-1",children:[y.jsx(p,{className:"text-xs "+(e?"text-gray-400":"text-gray-500")}),y.jsx("span",{className:"text-xs "+(e?"text-gray-400":"text-gray-500"),children:v(t.timestamp)})]}),t.read&&y.jsxs("div",{className:"flex items-center space-x-1",children:[y.jsx(f,{className:"text-xs "+(e?"text-green-400":"text-green-500")}),y.jsx("span",{className:"text-xs "+(e?"text-green-400":"text-green-500"),children:"Read"})]})]})]}),y.jsxs("div",{className:"mb-3",children:[y.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[y.jsx(j,{className:"text-sm "+(e?"text-gray-400":"text-gray-500")}),y.jsxs("span",{className:"text-sm font-medium "+(e?"text-gray-300":"text-gray-600"),children:["From: ",t.sender]})]}),y.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-600"} leading-relaxed`,children:t.message})]})]})},t.id)})}),y.jsx("div",{className:"p-4 rounded-xl shadow-sm border "+(e?"bg-gray-800 border-gray-700":"bg-white border-gray-100"),children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-semibold "+(e?"text-white":"text-gray-900"),children:"Notification Summary"}),y.jsxs("p",{className:"text-sm "+(e?"text-gray-400":"text-gray-600"),children:[t.length," total â€¢ ",S," unread"]})]}),y.jsxs("div",{className:"text-right",children:[y.jsx("div",{className:"text-2xl font-bold "+(e?"text-blue-400":"text-blue-600"),children:S}),y.jsx("div",{className:"text-xs "+(e?"text-gray-400":"text-gray-500"),children:"New alerts"})]})]})})]})})};export{w as default};
