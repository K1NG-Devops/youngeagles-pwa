var e=(e,s,a)=>new Promise((r,t)=>{var l=e=>{try{n(a.next(e))}catch(s){t(s)}},c=e=>{try{n(a.throw(e))}catch(s){t(s)}},n=e=>e.done?r(e.value):Promise.resolve(e.value).then(l,c);n((a=a.apply(e,s)).next())});import{r as s}from"./vendor-react-BHu_3aIX.js";import{u as a,l as r,j as t,O as l,r as c,_ as n,aj as i,C as d,b as o,a9 as m,A as x,n as g}from"./index-BetBoxhn.js";import{u as h}from"./vendor-router-BfAStt8k.js";import"./vendor-utils-C_UPlz3V.js";const y=()=>{const{user:y}=a(),{isDark:u}=r(),b=h(),[p,j]=s.useState([]),[N,v]=s.useState(null),[f,w]=s.useState([]),[_,C]=s.useState(!0),[P,S]=s.useState(!1);s.useEffect(()=>{e(void 0,null,function*(){var e,s,a;try{C(!0);const e=yield x.classes.getAll(),s=e.data.classes||e.data||[];j(s),0===s.length&&g.info("No classes found in the system")}catch(r){const t=(null==(s=null==(e=r.response)?void 0:e.data)?void 0:s.message)||r.message||"Failed to load classes data";if(404!==(null==(a=r.response)?void 0:a.status)&&"ECONNREFUSED"!==r.code&&r.response)g.error(t);else{const e=[{id:1,class_name:"Grade 3A",description:"Primary school class for 8-9 year olds",teacher_name:"teacher"===(null==y?void 0:y.role)?y.name:"Ms. Johnson",capacity:25,age_group:"8-9 years",student_count:18},{id:2,class_name:"Grade 4B",description:"Primary school class for 9-10 year olds",teacher_name:"teacher"===(null==y?void 0:y.role)?y.name:"Mr. Williams",capacity:28,age_group:"9-10 years",student_count:22},{id:3,class_name:"Grade 5C",description:"Primary school class for 10-11 year olds",teacher_name:"teacher"===(null==y?void 0:y.role)?y.name:"Mrs. Davis",capacity:30,age_group:"10-11 years",student_count:15}];if("teacher"===(null==y?void 0:y.role)){const s=e.find(e=>e.teacher_name===y.name)||e[0];s.teacher_name=y.name,j([s]),g.info(`Using demo data - showing your class: ${s.class_name}`)}else j(e),g.info(`Using demo data - ${e.length} sample classes`)}}finally{C(!1)}})},[y]);const k=()=>{v(null),w([])};return _?t.jsxs("div",{className:"min-h-screen "+(u?"bg-gray-900":"bg-gray-50"),children:[t.jsx(l,{}),t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:t.jsxs("div",{className:"text-center",children:[t.jsx(c,{className:"animate-spin h-12 w-12 text-blue-500 mx-auto mb-4"}),t.jsx("p",{className:""+(u?"text-gray-300":"text-gray-600"),children:"Loading classes..."})]})})]}):N?t.jsxs("div",{className:"min-h-screen "+(u?"bg-gray-900":"bg-gray-50"),children:[t.jsx(l,{}),t.jsx("div",{className:"pt-24 pb-4",children:t.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 space-y-6",children:[t.jsx("div",{className:"p-6 rounded-xl shadow-sm border "+(u?"bg-gray-800 border-gray-700":"bg-white border-gray-100"),children:t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-bold "+(u?"text-white":"text-gray-900"),children:["Children in ",N]}),t.jsxs("p",{className:""+(u?"text-gray-400":"text-gray-600"),children:["Total: ",f.length," children"]})]}),t.jsxs("button",{onClick:k,className:"inline-flex items-center px-4 py-2 rounded-lg transition-colors "+(u?"text-gray-300 hover:bg-gray-700 hover:text-white border border-gray-600":"text-gray-600 hover:bg-gray-100 hover:text-gray-900 border border-gray-300"),children:[t.jsx(n,{className:"w-4 h-4 mr-2"}),"Back to Classes"]})]})}),P?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsxs("div",{className:"text-center",children:[t.jsx(c,{className:"animate-spin h-8 w-8 text-blue-500 mx-auto mb-4"}),t.jsx("p",{className:""+(u?"text-gray-300":"text-gray-600"),children:"Loading children..."})]})}):0===f.length?t.jsxs("div",{className:"p-8 rounded-xl shadow-sm border text-center "+(u?"bg-gray-800 border-gray-700":"bg-white border-gray-100"),children:[t.jsx(i,{className:"h-16 w-16 mx-auto mb-4 "+(u?"text-gray-400":"text-gray-300")}),t.jsx("p",{className:"text-lg "+(u?"text-gray-300":"text-gray-600"),children:"No children found in this class."})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(e=>t.jsxs("div",{className:"p-6 rounded-xl shadow-sm border "+(u?"bg-gray-800 border-gray-700":"bg-white border-gray-100"),children:[t.jsxs("div",{className:"flex items-center mb-4",children:[t.jsx("div",{className:"p-3 rounded-lg "+(u?"bg-blue-900/20":"bg-blue-100"),children:t.jsx(i,{className:"w-6 h-6 "+(u?"text-blue-400":"text-blue-600")})}),t.jsx("div",{className:"ml-3",children:t.jsxs("h3",{className:"text-lg font-semibold "+(u?"text-white":"text-gray-900"),children:[e.first_name," ",e.last_name]})})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("p",{className:"text-sm "+(u?"text-gray-300":"text-gray-600"),children:[t.jsx("span",{className:"font-medium",children:"Age:"})," ",e.age||"Not specified"]}),e.parent_name&&t.jsxs("p",{className:"text-sm "+(u?"text-gray-300":"text-gray-600"),children:[t.jsx("span",{className:"font-medium",children:"Parent:"})," ",e.parent_name]}),e.emergency_contact&&t.jsxs("p",{className:"text-sm "+(u?"text-gray-300":"text-gray-600"),children:[t.jsx("span",{className:"font-medium",children:"Emergency Contact:"})," ",e.emergency_contact]})]})]},e.id))})]})})]}):0===p.length?t.jsxs("div",{className:"min-h-screen "+(u?"bg-gray-900":"bg-gray-50"),children:[t.jsx(l,{}),t.jsx("div",{className:"pt-24 pb-4",children:t.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6",children:t.jsxs("div",{className:"p-8 rounded-xl shadow-sm border text-center "+(u?"bg-gray-800 border-gray-700":"bg-white border-gray-100"),children:[t.jsx(d,{className:"h-16 w-16 mx-auto mb-4 "+(u?"text-gray-400":"text-gray-300")}),t.jsx("h2",{className:"text-2xl font-bold mb-2 "+(u?"text-white":"text-gray-900"),children:"No Classes Found"}),t.jsx("p",{className:""+(u?"text-gray-400":"text-gray-600"),children:"No classes are currently available in the system."})]})})})]}):t.jsxs("div",{className:"min-h-screen "+(u?"bg-gray-900":"bg-gray-50"),children:[t.jsx(l,{}),t.jsx("div",{className:"pt-24 pb-4",children:t.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 space-y-6",children:[t.jsx("div",{className:"p-6 rounded-xl shadow-sm border "+(u?"bg-gray-800 border-gray-700":"bg-white border-gray-100"),children:t.jsxs("div",{className:"flex items-center mb-4",children:[t.jsx("div",{className:"p-3 rounded-lg "+(u?"bg-blue-900/20":"bg-blue-100"),children:t.jsx(o,{className:"w-6 h-6 "+(u?"text-blue-400":"text-blue-600")})}),t.jsxs("div",{className:"ml-3",children:[t.jsx("h2",{className:"text-2xl font-bold "+(u?"text-white":"text-gray-900"),children:"Classes"}),t.jsxs("p",{className:""+(u?"text-gray-400":"text-gray-600"),children:["Total: ",p.length," classes"]})]})]})}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:p.map(s=>t.jsxs("div",{className:"p-6 rounded-xl shadow-sm border transition-all hover:shadow-md "+(u?"bg-gray-800 border-gray-700 hover:border-gray-600":"bg-white border-gray-100 hover:border-gray-200"),children:[t.jsxs("div",{className:"flex items-center mb-4",children:[t.jsx("div",{className:"p-3 rounded-lg "+(u?"bg-green-900/20":"bg-green-100"),children:t.jsx(m,{className:"w-6 h-6 "+(u?"text-green-400":"text-green-600")})}),t.jsx("div",{className:"ml-3",children:t.jsx("h3",{className:"text-lg font-semibold "+(u?"text-white":"text-gray-900"),children:s.class_name})})]}),t.jsxs("div",{className:"space-y-3 mb-6",children:[s.description&&t.jsxs("p",{className:"text-sm "+(u?"text-gray-300":"text-gray-600"),children:[t.jsx("span",{className:"font-medium",children:"Description:"})," ",s.description]}),s.teacher_name&&t.jsxs("p",{className:"text-sm "+(u?"text-gray-300":"text-gray-600"),children:[t.jsx("span",{className:"font-medium",children:"Teacher:"})," ",s.teacher_name]}),s.capacity&&t.jsxs("p",{className:"text-sm "+(u?"text-gray-300":"text-gray-600"),children:[t.jsx("span",{className:"font-medium",children:"Capacity:"})," ",s.capacity," students"]}),s.age_group&&t.jsxs("p",{className:"text-sm "+(u?"text-gray-300":"text-gray-600"),children:[t.jsx("span",{className:"font-medium",children:"Age Group:"})," ",s.age_group]})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[("teacher"===(null==y?void 0:y.role)||"admin"===(null==y?void 0:y.role))&&t.jsxs("button",{className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg font-medium transition-colors flex items-center justify-center",onClick:()=>{return a=s.id,s.class_name,e(void 0,null,function*(){try{S(!0),b(`/classes/${a}/children`)}finally{S(!1)}});var a},children:[t.jsx(i,{className:"w-4 h-4 mr-2"}),"View Children"]}),t.jsx("button",{className:"flex-1 py-2 px-4 rounded-lg font-medium transition-colors border "+(u?"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white":"border-gray-300 text-gray-600 hover:bg-gray-100 hover:text-gray-900"),onClick:()=>(e=>{e.class_name,e.description,e.teacher_name,e.capacity,e.age_group,e.student_count,e.id,b(`/classes/${e.id}/details`)})(s),children:"View Details"})]})]},s.id))})]})})]})};export{y as default};
