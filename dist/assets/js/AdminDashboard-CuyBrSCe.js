var e=(e,t,s)=>new Promise((a,r)=>{var l=e=>{try{i(s.next(e))}catch(t){r(t)}},n=e=>{try{i(s.throw(e))}catch(t){r(t)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(l,n);i((s=s.apply(e,t)).next())});import{r as t}from"./vendor-react-BHu_3aIX.js";import{u as s,l as a,j as r,aA as l,r as n,aN as i,aO as d,aj as c,E as x,aP as o,az as m,g,J as h,G as y,Z as p,D as b,q as u,A as j,n as N,O as v,_ as f,aQ as w,aD as P,aR as C,L as k,K as S,f as A,aM as R,d as E,a9 as D,aS as L,aG as _}from"./index-BetBoxhn.js";import{u as M,L as $}from"./vendor-router-BfAStt8k.js";import"./vendor-utils-C_UPlz3V.js";const O=()=>{const{user:v}=s(),{isDark:f}=a(),[w,P]=t.useState("pending-registrations"),[C,k]=t.useState(!0),[S,A]=t.useState(""),[R,E]=t.useState("all"),[D,L]=t.useState([]),[_,M]=t.useState([]),[$,O]=t.useState([]),[U,Y]=t.useState({totalParents:0,youngEaglesParents:0,externalParents:0,pendingApprovals:0,referredParents:0}),T={young_eagles:{label:"Young Eagles Parent",color:"blue",description:"Parent of a Young Eagles student"},external:{label:"External Parent",color:"green",description:"Not currently a Young Eagles parent"},referred:{label:"Referred Parent",color:"purple",description:"Referred by a Young Eagles parent"},prospective:{label:"Prospective Parent",color:"orange",description:"Interested in Young Eagles"}},F=()=>e(void 0,null,function*(){try{k(!0);const[e,t,s,a]=yield Promise.allSettled([j.admin.getPendingChildRegistrations(),j.admin.getPendingParentLinks(),j.admin.getAllParents(),j.admin.getParentStats()]);"fulfilled"===e.status?L(e.value.data.registrations||[]):L([]),"fulfilled"===t.status?M(t.value.data.links||[]):M([]),"fulfilled"===s.status?O(s.value.data.parents||[]):O([]),"fulfilled"===a.status&&Y(a.value.data.stats||U)}catch(e){N.error("Failed to load admin data")}finally{k(!1)}});t.useEffect(()=>{"admin"===(null==v?void 0:v.role)&&F()},[v]);const I=(e,t)=>e.filter(e=>{const s=""===S||t.some(t=>{var s;return null==(s=e[t])?void 0:s.toLowerCase().includes(S.toLowerCase())}),a="all"===R||e.category===R||e.status===R;return s&&a});if(!v||"admin"!==v.role)return r.jsx("div",{className:"flex items-center justify-center min-h-screen "+(f?"bg-gray-900":"bg-gray-50"),children:r.jsxs("div",{className:"text-center",children:[r.jsx(l,{className:"text-6xl text-red-500 mx-auto mb-4"}),r.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-2",children:"Access Denied"}),r.jsx("p",{className:"text-gray-600",children:"Admin privileges required to access this page."})]})});if(C)return r.jsx("div",{className:"flex items-center justify-center min-h-screen "+(f?"bg-gray-900":"bg-gray-50"),children:r.jsxs("div",{className:"text-center",children:[r.jsx(n,{className:"text-4xl animate-spin text-blue-500 mx-auto mb-4"}),r.jsx("p",{className:""+(f?"text-gray-300":"text-gray-600"),children:"Loading parent management data..."})]})});const G=[{id:"pending-registrations",label:"Pending Registrations",icon:i,count:D.length},{id:"pending-links",label:"Pending Links",icon:d,count:_.length},{id:"all-parents",label:"All Parents",icon:c,count:$.length}];return r.jsxs("div",{className:`min-h-screen ${f?"bg-gray-900":"bg-gray-50"} p-4 lg:p-6`,children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl lg:text-3xl font-bold mb-2 "+(f?"text-white":"text-gray-900"),children:"Parent Management"}),r.jsx("p",{className:""+(f?"text-gray-400":"text-gray-600"),children:"Manage parent registrations, categorizations, and approvals"})]}),r.jsxs("button",{onClick:()=>e(void 0,null,function*(){try{const e=yield j.admin.exportParents(),t=new Blob([e.data],{type:"text/csv"}),s=window.URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=`young_eagles_parents_${(new Date).toISOString().split("T")[0]}.csv`,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(s),N.success("Parents data exported successfully!")}catch(e){N.error("Failed to export data")}}),className:"mt-4 lg:mt-0 inline-flex items-center px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:[r.jsx(x,{className:"mr-2"}),"Export Data"]})]}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4 mb-6",children:[r.jsx("div",{className:`p-4 rounded-lg ${f?"bg-gray-800":"bg-white"} shadow-sm`,children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(c,{className:"text-2xl text-blue-500 mr-3"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold "+(f?"text-white":"text-gray-900"),children:U.totalParents}),r.jsx("p",{className:"text-xs "+(f?"text-gray-400":"text-gray-600"),children:"Total Parents"})]})]})}),r.jsx("div",{className:`p-4 rounded-lg ${f?"bg-gray-800":"bg-white"} shadow-sm`,children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(o,{className:"text-2xl text-blue-600 mr-3"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold "+(f?"text-white":"text-gray-900"),children:U.youngEaglesParents}),r.jsx("p",{className:"text-xs "+(f?"text-gray-400":"text-gray-600"),children:"Young Eagles"})]})]})}),r.jsx("div",{className:`p-4 rounded-lg ${f?"bg-gray-800":"bg-white"} shadow-sm`,children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(m,{className:"text-2xl text-green-500 mr-3"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold "+(f?"text-white":"text-gray-900"),children:U.externalParents}),r.jsx("p",{className:"text-xs "+(f?"text-gray-400":"text-gray-600"),children:"External"})]})]})}),r.jsx("div",{className:`p-4 rounded-lg ${f?"bg-gray-800":"bg-white"} shadow-sm`,children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(g,{className:"text-2xl text-yellow-500 mr-3"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold "+(f?"text-white":"text-gray-900"),children:U.pendingApprovals}),r.jsx("p",{className:"text-xs "+(f?"text-gray-400":"text-gray-600"),children:"Pending"})]})]})}),r.jsx("div",{className:`p-4 rounded-lg ${f?"bg-gray-800":"bg-white"} shadow-sm`,children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(d,{className:"text-2xl text-purple-500 mr-3"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold "+(f?"text-white":"text-gray-900"),children:U.referredParents}),r.jsx("p",{className:"text-xs "+(f?"text-gray-400":"text-gray-600"),children:"Referred"})]})]})})]})]}),r.jsx("div",{className:"mb-6",children:r.jsx("div",{className:"flex flex-wrap border-b border-gray-200 dark:border-gray-700",children:G.map(e=>{const t=e.icon;return r.jsxs("button",{onClick:()=>P(e.id),className:"flex items-center px-4 py-3 mr-2 mb-2 rounded-t-lg font-medium transition-colors "+(w===e.id?f?"bg-gray-800 text-blue-400 border-b-2 border-blue-400":"bg-white text-blue-600 border-b-2 border-blue-600":f?"text-gray-400 hover:text-gray-300":"text-gray-600 hover:text-gray-900"),children:[r.jsx(t,{className:"mr-2"}),e.label,e.count>0&&r.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs rounded-full "+(w===e.id?"bg-blue-100 text-blue-800":"bg-gray-200 text-gray-800"),children:e.count})]},e.id)})})}),r.jsxs("div",{className:"mb-6 flex flex-col lg:flex-row gap-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(h,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 "+(f?"text-gray-400":"text-gray-500")}),r.jsx("input",{type:"text",placeholder:"Search parents, children, or email...",value:S,onChange:e=>A(e.target.value),className:`w-full pl-10 pr-4 py-3 rounded-lg border ${f?"bg-gray-800 border-gray-700 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"} focus:ring-2 focus:ring-blue-500 focus:border-transparent`})]}),r.jsxs("select",{value:R,onChange:e=>E(e.target.value),className:`px-4 py-3 rounded-lg border ${f?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-blue-500 focus:border-transparent`,children:[r.jsx("option",{value:"all",children:"All Categories"}),Object.entries(T).map(([e,t])=>r.jsx("option",{value:e,children:t.label},e))]})]}),r.jsxs("div",{className:`rounded-lg ${f?"bg-gray-800":"bg-white"} shadow-sm`,children:["pending-registrations"===w&&r.jsxs("div",{className:"p-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 "+(f?"text-white":"text-gray-900"),children:"Pending Child Registrations"}),0===D.length?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(d,{className:"text-6xl mx-auto mb-4 "+(f?"text-gray-600":"text-gray-400")}),r.jsx("p",{className:"text-lg "+(f?"text-gray-400":"text-gray-600"),children:"No pending child registrations"})]}):r.jsx("div",{className:"space-y-4",children:I(D,["parentName","parentEmail","childFirstName","childLastName"]).map(t=>r.jsx("div",{className:"p-4 border rounded-lg "+(f?"border-gray-700":"border-gray-200"),children:r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center mb-2",children:[r.jsx(y,{className:"text-blue-500 mr-2"}),r.jsxs("h4",{className:"font-semibold "+(f?"text-white":"text-gray-900"),children:[t.childFirstName," ",t.childLastName]}),r.jsx("span",{className:"ml-2 px-2 py-1 text-xs rounded-full "+(t.isExistingStudent?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:t.isExistingStudent?"Existing Student":"New Registration"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium "+(f?"text-gray-300":"text-gray-700"),children:"Parent:"}),r.jsx("p",{className:""+(f?"text-gray-400":"text-gray-600"),children:t.parentName}),r.jsx("p",{className:""+(f?"text-gray-400":"text-gray-600"),children:t.parentEmail})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium "+(f?"text-gray-300":"text-gray-700"),children:"Child Details:"}),r.jsxs("p",{className:""+(f?"text-gray-400":"text-gray-600"),children:["Grade ",t.childGrade," â€¢ ",t.childGender]}),r.jsxs("p",{className:""+(f?"text-gray-400":"text-gray-600"),children:["DOB: ",new Date(t.childDateOfBirth).toLocaleDateString()]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium "+(f?"text-gray-300":"text-gray-700"),children:"Submitted:"}),r.jsx("p",{className:""+(f?"text-gray-400":"text-gray-600"),children:new Date(t.createdAt).toLocaleDateString()})]})]}),t.notes&&r.jsxs("div",{className:"mt-3",children:[r.jsx("p",{className:"font-medium "+(f?"text-gray-300":"text-gray-700"),children:"Notes:"}),r.jsx("p",{className:"text-sm "+(f?"text-gray-400":"text-gray-600"),children:t.notes})]})]}),r.jsxs("div",{className:"mt-4 lg:mt-0 lg:ml-6 flex flex-col gap-2",children:[r.jsx("select",{defaultValue:"external",className:"px-3 py-2 rounded-lg border text-sm "+(f?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"),onChange:e=>{t.selectedCategory=e.target.value},children:Object.entries(T).map(([e,t])=>r.jsx("option",{value:e,children:t.label},e))}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>{const s=t.selectedCategory||"external";((t,s="external")=>{e(void 0,null,function*(){try{const e=yield j.admin.approveChildRegistration(t,{parentCategory:s,adminNotes:`Approved by ${v.name}`});e.data.success&&(N.success("Child registration approved successfully!"),yield j.notifications.send({recipientId:e.data.parentId,title:"Child Registration Approved",message:"Your child registration has been approved! You can now access all features.",type:"approval",priority:"high"}),F())}catch(e){N.error("Failed to approve registration")}})})(t.id,s)},className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors flex items-center text-sm",children:[r.jsx(p,{className:"mr-1"}),"Approve"]}),r.jsxs("button",{onClick:()=>{const s=prompt("Reason for rejection:");s&&((t,s)=>{e(void 0,null,function*(){try{const e=yield j.admin.rejectChildRegistration(t,{reason:s,adminNotes:`Rejected by ${v.name}: ${s}`});e.data.success&&(N.success("Child registration rejected"),yield j.notifications.send({recipientId:e.data.parentId,title:"Child Registration Rejected",message:`Your child registration was rejected: ${s}`,type:"rejection",priority:"high"}),F())}catch(e){N.error("Failed to reject registration")}})})(t.id,s)},className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors flex items-center text-sm",children:[r.jsx(b,{className:"mr-1"}),"Reject"]})]})]})]})},t.id))})]}),"pending-links"===w&&r.jsxs("div",{className:"p-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 "+(f?"text-white":"text-gray-900"),children:"Pending Parent-Child Links"}),0===_.length?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(d,{className:"text-6xl mx-auto mb-4 "+(f?"text-gray-600":"text-gray-400")}),r.jsx("p",{className:"text-lg "+(f?"text-gray-400":"text-gray-600"),children:"No pending parent-child links"})]}):r.jsx("div",{className:"space-y-4",children:I(_,["parentName","parentEmail","childName"]).map(t=>r.jsx("div",{className:"p-4 border rounded-lg "+(f?"border-gray-700":"border-gray-200"),children:r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center mb-2",children:[r.jsx(c,{className:"text-purple-500 mr-2"}),r.jsx("h4",{className:"font-semibold "+(f?"text-white":"text-gray-900"),children:"Link Request"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium "+(f?"text-gray-300":"text-gray-700"),children:"Parent:"}),r.jsxs("p",{className:""+(f?"text-gray-400":"text-gray-600"),children:[t.parentName," (",t.parentEmail,")"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium "+(f?"text-gray-300":"text-gray-700"),children:"Child:"}),r.jsxs("p",{className:""+(f?"text-gray-400":"text-gray-600"),children:[t.childName," (Grade ",t.childGrade,")"]})]})]}),r.jsxs("div",{className:"mt-3",children:[r.jsx("p",{className:"font-medium "+(f?"text-gray-300":"text-gray-700"),children:"Submitted:"}),r.jsx("p",{className:"text-sm "+(f?"text-gray-400":"text-gray-600"),children:new Date(t.createdAt).toLocaleDateString()})]})]}),r.jsxs("div",{className:"mt-4 lg:mt-0 lg:ml-6 flex gap-2",children:[r.jsxs("button",{onClick:()=>{return s=t.id,e(void 0,null,function*(){try{const e=yield j.admin.approveParentLink(s);e.data.success&&(N.success("Parent-child link approved!"),yield j.notifications.send({recipientId:e.data.parentId,title:"Child Link Approved",message:"Your request to link with your child has been approved!",type:"approval",priority:"high"}),F())}catch(e){N.error("Failed to approve link")}});var s},className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors flex items-center text-sm",children:[r.jsx(p,{className:"mr-1"}),"Approve"]}),r.jsxs("button",{onClick:()=>{prompt("Reason for rejection:")},className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors flex items-center text-sm",children:[r.jsx(b,{className:"mr-1"}),"Reject"]})]})]})},t.id))})]}),"all-parents"===w&&r.jsxs("div",{className:"p-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 "+(f?"text-white":"text-gray-900"),children:"All Parents"}),0===$.length?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(c,{className:"text-6xl mx-auto mb-4 "+(f?"text-gray-600":"text-gray-400")}),r.jsx("p",{className:"text-lg "+(f?"text-gray-400":"text-gray-600"),children:"No parents found"})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b "+(f?"border-gray-700":"border-gray-200"),children:[r.jsx("th",{className:"text-left py-3 px-4 font-medium "+(f?"text-gray-300":"text-gray-700"),children:"Parent"}),r.jsx("th",{className:"text-left py-3 px-4 font-medium "+(f?"text-gray-300":"text-gray-700"),children:"Children"}),r.jsx("th",{className:"text-left py-3 px-4 font-medium "+(f?"text-gray-300":"text-gray-700"),children:"Category"}),r.jsx("th",{className:"text-left py-3 px-4 font-medium "+(f?"text-gray-300":"text-gray-700"),children:"Joined"}),r.jsx("th",{className:"text-left py-3 px-4 font-medium "+(f?"text-gray-300":"text-gray-700"),children:"Actions"})]})}),r.jsx("tbody",{children:I($,["name","email","childrenNames"]).map(t=>r.jsxs("tr",{className:"border-b "+(f?"border-gray-700":"border-gray-200"),children:[r.jsx("td",{className:"py-4 px-4",children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium "+(f?"text-white":"text-gray-900"),children:t.name}),r.jsx("p",{className:"text-sm "+(f?"text-gray-400":"text-gray-600"),children:t.email})]})}),r.jsxs("td",{className:"py-4 px-4",children:[r.jsxs("p",{className:"text-sm "+(f?"text-gray-300":"text-gray-700"),children:[t.childrenCount," ",1===t.childrenCount?"child":"children"]}),r.jsx("p",{className:"text-xs "+(f?"text-gray-400":"text-gray-600"),children:t.childrenNames})]}),r.jsx("td",{className:"py-4 px-4",children:r.jsx("select",{value:t.category,onChange:s=>{return a=t.id,r=s.target.value,e(void 0,null,function*(){try{(yield j.admin.updateParentCategory(a,{category:r,adminNotes:`Category updated by ${v.name}`})).data.success&&(N.success("Parent category updated successfully!"),F())}catch(e){N.error("Failed to update parent category")}});var a,r},className:"px-3 py-1 rounded-lg border text-sm "+(f?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"),children:Object.entries(T).map(([e,t])=>r.jsx("option",{value:e,children:t.label},e))})}),r.jsx("td",{className:"py-4 px-4",children:r.jsx("p",{className:"text-sm "+(f?"text-gray-300":"text-gray-700"),children:new Date(t.createdAt).toLocaleDateString()})}),r.jsx("td",{className:"py-4 px-4",children:r.jsx("button",{onClick:()=>{},className:"p-2 text-blue-500 hover:bg-blue-100 dark:hover:bg-blue-900/20 rounded-lg transition-colors",children:r.jsx(u,{})})})]},t.id))})]})})]})]})]})},U=()=>{const{user:n}=s(),{isDark:i}=a(),d=M(),[x,o]=t.useState({totalUsers:0,totalTeachers:0,totalParents:0,totalStudents:0,totalClasses:0,totalHomework:0,pendingPayments:0,systemAlerts:0}),[m,h]=t.useState(!0),[y,p]=t.useState([]),[b,u]=t.useState([]),[U,Y]=t.useState([]),[T,F]=t.useState({api:"operational",database:"operational",storage:"operational"}),[I,G]=t.useState(!1),[q,B]=t.useState(!1);if(t.useEffect(()=>{n&&"admin"===n.role&&e(void 0,null,function*(){var e,t,s,a,r,l,n,i,d,c;try{h(!0);const[m,g,y]=yield Promise.all([j.children.getAll().catch(()=>({data:{children:[]}})),j.classes.getAll().catch(()=>({data:{classes:[]}})),null==(t=null==(e=j.users)?void 0:e.getAll)?void 0:t.call(e).catch(()=>({data:{users:[]}}))]),b=m.data.children||[],N=g.data.classes||[],v=(null==(s=null==y?void 0:y.data)?void 0:s.users)||[],f=v.filter(e=>"teacher"===e.role).length,w=v.filter(e=>"parent"===e.role).length;let P=null;try{P=(yield j.users.getStats()).data.stats}catch(x){}let C=(null==P?void 0:P.pendingApprovals)||0;try{const e=yield null==(r=null==(a=j.payments)?void 0:a.getProofs)?void 0:r.call(a),t=(null==(l=null==e?void 0:e.data)?void 0:l.proofs)||[];P||(C=t.filter(e=>"pending"===e.status).length),u(t.filter(e=>"pending"===e.status).slice(0,5))}catch(x){}let k=0;try{const e=yield null==(i=null==(n=j.homework)?void 0:n.getAll)?void 0:i.call(n);k=(null==(c=null==(d=null==e?void 0:e.data)?void 0:d.homework)?void 0:c.length)||0}catch(x){}o({totalUsers:(null==P?void 0:P.totalUsers)||v.length,totalTeachers:(null==P?void 0:P.totalTeachers)||f,totalParents:(null==P?void 0:P.totalParents)||w,totalStudents:(null==P?void 0:P.totalChildren)||b.length,totalClasses:N.length,totalHomework:k,pendingPayments:C,systemAlerts:C>0?1:0}),p(v.slice(-5).reverse()),Y([{id:1,type:"user_registered",message:"New parent registered",time:"2 hours ago",user:"John Smith"},{id:2,type:"payment_submitted",message:"Payment proof submitted",time:"4 hours ago",user:"Mary Johnson"},{id:3,type:"class_created",message:"New class created",time:"6 hours ago",user:"Teacher Sarah"},{id:4,type:"homework_assigned",message:"Homework assigned",time:"8 hours ago",user:"Teacher Mike"},{id:5,type:"user_login",message:"Admin login",time:"1 day ago",user:"Admin User"}])}catch(x){N.error("Failed to load admin dashboard data")}finally{h(!1)}})},[n]),m)return r.jsx("div",{className:"flex items-center justify-center min-h-screen "+(i?"bg-gray-900":"bg-gray-50"),children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),r.jsx("p",{className:""+(i?"text-gray-300":"text-gray-600"),children:"Loading admin dashboard..."})]})});const H=e=>{switch(e){case"approve_payment":d("/admin-payment-review");break;case"create_user":d("/management");break;case"view_analytics":N.info("Advanced analytics coming soon!");break;case"system_settings":d("/settings")}};return n&&"admin"===n.role?q?r.jsxs("div",{className:"min-h-screen "+(i?"bg-gray-900":"bg-gray-50"),children:[r.jsx(v,{}),r.jsx("div",{className:"pt-4 pb-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"mb-6",children:r.jsxs("button",{onClick:()=>B(!1),className:"inline-flex items-center px-4 py-2 rounded-lg font-medium transition-all duration-200 "+(i?"text-gray-300 hover:bg-gray-700 hover:text-white":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"),children:[r.jsx(f,{className:"w-4 h-4 mr-2"}),"Back to Admin Dashboard"]})}),r.jsx(O,{})]})})]}):r.jsxs("div",{className:"min-h-screen "+(i?"bg-gray-900":"bg-gray-50"),children:[r.jsx(v,{}),r.jsx("div",{className:"pt-4 pb-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[r.jsx("div",{className:"bg-gradient-to-r border-b-2 mb-8 border-blue-500 rounded-xl from-blue-600 to-purple-600 text-white",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl md:text-3xl font-bold mb-2",children:[r.jsx(l,{className:"inline mr-3"}),"Admin Dashboard"]}),r.jsx("p",{className:"text-blue-100 text-sm md:text-base",children:"System Administration - Manage your Young Eagles platform"})]}),r.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold",children:x.totalUsers}),r.jsx("div",{className:"text-sm text-blue-200",children:"Total Users"})]}),r.jsx("div",{className:"w-px h-12 bg-blue-300"}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold",children:x.pendingPayments}),r.jsx("div",{className:"text-sm text-blue-200",children:"Pending Approvals"})]})]})]})})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[r.jsx("div",{className:"p-6 rounded-xl shadow-sm border "+(i?"bg-gray-800 border-gray-700":"bg-white border-gray-100"),children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(c,{className:"text-3xl text-blue-500"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium "+(i?"text-gray-400":"text-gray-500"),children:"Total Users"}),r.jsx("p",{className:"text-2xl font-semibold "+(i?"text-white":"text-gray-900"),children:x.totalUsers}),r.jsxs("p",{className:"text-xs "+(i?"text-gray-500":"text-gray-400"),children:[x.totalParents," parents, ",x.totalTeachers," teachers"]})]})]})}),r.jsx("div",{className:"p-6 rounded-xl shadow-sm border "+(i?"bg-gray-800 border-gray-700":"bg-white border-gray-100"),children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(w,{className:"text-3xl text-green-500"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium "+(i?"text-gray-400":"text-gray-500"),children:"Total Students"}),r.jsx("p",{className:"text-2xl font-semibold "+(i?"text-white":"text-gray-900"),children:x.totalStudents})]})]})}),r.jsx("div",{className:"p-6 rounded-xl shadow-sm border "+(i?"bg-gray-800 border-gray-700":"bg-white border-gray-100"),children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(P,{className:"text-3xl text-yellow-500"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium "+(i?"text-gray-400":"text-gray-500"),children:"Pending Payments"}),r.jsx("p",{className:"text-2xl font-semibold "+(i?"text-white":"text-gray-900"),children:x.pendingPayments}),x.pendingPayments>0&&r.jsx("p",{className:"text-xs text-yellow-500",children:"Requires approval"})]})]})}),r.jsx("div",{className:"p-6 rounded-xl shadow-sm border "+(i?"bg-gray-800 border-gray-700":"bg-white border-gray-100"),children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(C,{className:"text-3xl text-green-500"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium "+(i?"text-gray-400":"text-gray-500"),children:"System Health"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(k,{className:"text-green-500"}),r.jsx("p",{className:"text-lg font-semibold "+(i?"text-white":"text-gray-900"),children:"Operational"})]})]})]})})]}),r.jsxs("div",{className:"mb-8",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 "+(i?"text-white":"text-gray-900"),children:"Quick Actions"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("button",{onClick:()=>H("approve_payment"),className:"p-4 rounded-lg border transition-all hover:shadow-md "+(i?"bg-gray-800 border-gray-700 hover:bg-gray-750":"bg-white border-gray-200 hover:bg-gray-50"),children:[r.jsx(P,{className:"text-2xl text-yellow-500 mx-auto mb-2"}),r.jsx("p",{className:"text-sm font-medium "+(i?"text-white":"text-gray-900"),children:"Approve Payments"})]}),r.jsxs("button",{onClick:()=>H("create_user"),className:"p-4 rounded-lg border transition-all hover:shadow-md "+(i?"bg-gray-800 border-gray-700 hover:bg-gray-750":"bg-white border-gray-200 hover:bg-gray-50"),children:[r.jsx(S,{className:"text-2xl text-blue-500 mx-auto mb-2"}),r.jsx("p",{className:"text-sm font-medium "+(i?"text-white":"text-gray-900"),children:"Create User"})]}),r.jsxs("button",{onClick:()=>H("view_analytics"),className:"p-4 rounded-lg border transition-all hover:shadow-md "+(i?"bg-gray-800 border-gray-700 hover:bg-gray-750":"bg-white border-gray-200 hover:bg-gray-50"),children:[r.jsx(A,{className:"text-2xl text-purple-500 mx-auto mb-2"}),r.jsx("p",{className:"text-sm font-medium "+(i?"text-white":"text-gray-900"),children:"Analytics"})]}),r.jsxs("button",{onClick:()=>H("system_settings"),className:"p-4 rounded-lg border transition-all hover:shadow-md "+(i?"bg-gray-800 border-gray-700 hover:bg-gray-750":"bg-white border-gray-200 hover:bg-gray-50"),children:[r.jsx(R,{className:"text-2xl text-gray-500 mx-auto mb-2"}),r.jsx("p",{className:"text-sm font-medium "+(i?"text-white":"text-gray-900"),children:"Settings"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[r.jsx($,{to:"/management",className:"p-6 rounded-xl shadow-sm border transition-all hover:shadow-md hover:scale-105 "+(i?"bg-gray-800 border-gray-700 hover:bg-gray-750":"bg-white border-gray-100 hover:bg-gray-50"),children:r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx(c,{className:"text-3xl text-blue-500 mr-4"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold "+(i?"text-white":"text-gray-900"),children:"User Management"}),r.jsx("p",{className:"text-sm "+(i?"text-gray-400":"text-gray-600"),children:"Manage users, roles, and subscriptions"})]})]})}),r.jsxs($,{to:"/admin-payment-review",className:"p-6 rounded-xl shadow-sm border transition-all hover:shadow-md hover:scale-105 "+(i?"bg-gray-800 border-gray-700 hover:bg-gray-750":"bg-white border-gray-100 hover:bg-gray-50"),children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx(P,{className:"text-3xl text-green-500 mr-4"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold "+(i?"text-white":"text-gray-900"),children:"Payment Management"}),r.jsx("p",{className:"text-sm "+(i?"text-gray-400":"text-gray-600"),children:"Review and approve payment proofs"})]})]}),x.pendingPayments>0&&r.jsx("div",{className:"mt-3 flex items-center justify-between",children:r.jsxs("span",{className:"text-xs px-2 py-1 rounded-full bg-yellow-100 text-yellow-800",children:[x.pendingPayments," pending"]})})]}),r.jsx($,{to:"/curated-lessons",className:"p-6 rounded-xl shadow-sm border transition-all hover:shadow-md hover:scale-105 "+(i?"bg-gray-800 border-gray-700 hover:bg-gray-750":"bg-white border-gray-100 hover:bg-gray-50"),children:r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx(E,{className:"text-3xl text-purple-500 mr-4"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold "+(i?"text-white":"text-gray-900"),children:"Content Management"}),r.jsx("p",{className:"text-sm "+(i?"text-gray-400":"text-gray-600"),children:"Manage curriculum and lesson library"})]})]})}),r.jsx($,{to:"/classes",className:"p-6 rounded-xl shadow-sm border transition-all hover:shadow-md hover:scale-105 "+(i?"bg-gray-800 border-gray-700 hover:bg-gray-750":"bg-white border-gray-100 hover:bg-gray-50"),children:r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx(D,{className:"text-3xl text-indigo-500 mr-4"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold "+(i?"text-white":"text-gray-900"),children:"Class Management"}),r.jsx("p",{className:"text-sm "+(i?"text-gray-400":"text-gray-600"),children:"Manage classes and teacher assignments"})]})]})}),r.jsx("button",{onClick:()=>B(!0),className:"p-6 rounded-xl shadow-sm border transition-all hover:shadow-md hover:scale-105 text-left "+(i?"bg-gray-800 border-gray-700 hover:bg-gray-750":"bg-white border-gray-100 hover:bg-gray-50"),children:r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx(L,{className:"text-3xl text-orange-500 mr-4"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold "+(i?"text-white":"text-gray-900"),children:"Parent Management"}),r.jsx("p",{className:"text-sm "+(i?"text-gray-400":"text-gray-600"),children:"Manage parent registrations and approvals"})]})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"p-6 rounded-xl shadow-sm border "+(i?"bg-gray-800 border-gray-700":"bg-white border-gray-100"),children:[r.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center "+(i?"text-white":"text-gray-900"),children:[r.jsx(g,{className:"mr-2 text-blue-500"}),"Recent Activity"]}),r.jsx("div",{className:"space-y-3",children:U.slice(0,5).map(e=>r.jsxs("div",{className:"p-3 rounded-lg "+(i?"bg-gray-700":"bg-gray-50"),children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("p",{className:"text-sm font-medium "+(i?"text-white":"text-gray-900"),children:e.message}),r.jsx("span",{className:"text-xs "+(i?"text-gray-400":"text-gray-500"),children:e.time})]}),r.jsxs("p",{className:"text-xs "+(i?"text-gray-400":"text-gray-600"),children:["by ",e.user]})]},e.id))})]}),r.jsxs("div",{className:"p-6 rounded-xl shadow-sm border "+(i?"bg-gray-800 border-gray-700":"bg-white border-gray-100"),children:[r.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center "+(i?"text-white":"text-gray-900"),children:[r.jsx(P,{className:"mr-2 text-yellow-500"}),"Pending Payment Approvals"]}),b.length>0?r.jsx("div",{className:"space-y-3",children:b.map((e,t)=>r.jsx("div",{className:"p-3 rounded-lg border "+(i?"bg-gray-700 border-gray-600":"bg-yellow-50 border-yellow-200"),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm font-medium "+(i?"text-white":"text-gray-900"),children:["Payment Proof #",t+1]}),r.jsxs("p",{className:"text-xs "+(i?"text-gray-400":"text-gray-600"),children:["Amount: R",e.amount||"150.00"]})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{className:"p-1 rounded text-green-600 hover:bg-green-100",children:r.jsx(k,{className:"w-4 h-4"})}),r.jsx("button",{className:"p-1 rounded text-red-600 hover:bg-red-100",children:r.jsx(_,{className:"w-4 h-4"})})]})]})},t))}):r.jsxs("div",{className:"text-center py-4",children:[r.jsx(k,{className:"text-4xl mx-auto mb-2 "+(i?"text-gray-600":"text-gray-400")}),r.jsx("p",{className:"text-sm "+(i?"text-gray-400":"text-gray-600"),children:"No pending payment approvals"})]})]})]}),r.jsxs("div",{className:"mt-6 p-6 rounded-xl shadow-sm border "+(i?"bg-gray-800 border-gray-700":"bg-white border-gray-100"),children:[r.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center "+(i?"text-white":"text-gray-900"),children:[r.jsx(C,{className:"mr-2 text-green-500"}),"System Status"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-green-50 border border-green-200",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(k,{className:"text-green-500 mr-2"}),r.jsx("span",{className:"text-sm font-medium text-green-800",children:"API Server"})]}),r.jsx("span",{className:"text-xs text-green-600",children:"Operational"})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-green-50 border border-green-200",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(k,{className:"text-green-500 mr-2"}),r.jsx("span",{className:"text-sm font-medium text-green-800",children:"Database"})]}),r.jsx("span",{className:"text-xs text-green-600",children:"Operational"})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-green-50 border border-green-200",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(k,{className:"text-green-500 mr-2"}),r.jsx("span",{className:"text-sm font-medium text-green-800",children:"Storage"})]}),r.jsx("span",{className:"text-xs text-green-600",children:"Operational"})]})]})]})]})})]}):r.jsx("div",{className:"flex items-center justify-center min-h-screen "+(i?"bg-gray-900":"bg-gray-50"),children:r.jsxs("div",{className:"text-center",children:[r.jsx(l,{className:"text-6xl text-red-500 mx-auto mb-4"}),r.jsx("h2",{className:"text-2xl font-bold mb-2 "+(i?"text-white":"text-gray-900"),children:"Access Denied"}),r.jsx("p",{className:""+(i?"text-gray-300":"text-gray-600"),children:"You need admin privileges to access this page."})]})})};export{U as default};
